{"remainingRequest":"D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\src\\views\\logging\\SystemLog.vue?vue&type=style&index=0&id=92b2aaca&scoped=true&lang=css","dependencies":[{"path":"D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\src\\views\\logging\\SystemLog.vue","mtime":1671435369719},{"path":"D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\node_modules\\css-loader\\dist\\cjs.js","mtime":1704694304351},{"path":"D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1704694305094},{"path":"D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\node_modules\\postcss-loader\\src\\index.js","mtime":1704694305086},{"path":"D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704694273307},{"path":"D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1704694305094}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5lZGl0YWJsZS1hZGQtYnRuIHsKICBtYXJnaW4tYm90dG9tOiAxNXB4Owp9Cg=="},{"version":3,"sources":["SystemLog.vue"],"names":[],"mappings":";AAgKA;AACA;AACA","file":"SystemLog.vue","sourceRoot":"src/views/logging","sourcesContent":["<template>\r\n    <div>\r\n      <!-- 搜索框 -->\r\n      <div style=\"display:flex; margin-bottom: 20px;\">\r\n    <!-- 搜索表单 -->\r\n    <a-form layout=\"inline\" style=\"display: flex;align-items: center;\">\r\n        <a-form-item>\r\n        <a-input v-model:value=\"formState.account\" placeholder=\"账号\">\r\n        </a-input>\r\n        </a-form-item>\r\n        <a-form-item>\r\n            <a-input v-model:value=\"formState.moudle\" placeholder=\"模块名\"> \r\n            </a-input>\r\n        </a-form-item>\r\n        <a-button type=\"primary\"  html-type=\"submit\" @click=\"handleSubmit\" >搜索</a-button>\r\n\r\n        <!-- 导出操作日志 -->\r\n        <download-excel\r\n          class=\"export-excel-wrapper\"\r\n          style=\"margin-left: 20px;\"\r\n          :data=\"data\"\r\n          :fields=\"json_fields\"\r\n          name=\"操作日志.xls\">\r\n        <a-button class=\"editable-btn\">\r\n          <a-icon type=\"cloud-download\"/>\r\n          下载操作日志 Excel\r\n        </a-button>\r\n      </download-excel>\r\n    </a-form>\r\n   \r\n   </div>\r\n      <!-- 表格数据 -->\r\n      <a-table :loading=\"loading\" :columns=\"columns\" :data-source=\"data\" \r\n      :sortDirections=\"['ascend', 'descend']\" rowKey=\"id\" >\r\n        <a slot=\"name\" slot-scope=\"text\">{{ text }}</a>\r\n        <span slot=\"customTitle\"><a-icon type=\"smile-o\"/> 账号 </span>\r\n        <span slot=\"action\" slot-scope=\"text, record, index\">\r\n            <a-divider type=\"vertical\"/>\r\n           <a-button @click=\"handleDelete(record,index)\" type=\"link\"><a-icon type=\"delete\"/> Delete</a-button>\r\n        </span>\r\n      </a-table>\r\n  \r\n  \r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import {FindAllSystemLog,DeleteSystemLogById,querySystemLog} from \"@/api/log\";\r\n  \r\n  const columns = [\r\n    {\r\n      dataIndex: 'account',\r\n      key: 'account',\r\n      slots: {title: 'customTitle'},\r\n      scopedSlots: {customRender: 'account'}\r\n    },\r\n    {\r\n      title: '功能模块',\r\n      dataIndex: 'module',\r\n      key: 'module',\r\n    },\r\n    {\r\n      title: '操作类型',\r\n      dataIndex: 'busincessType',\r\n      key: 'busincessType',\r\n    },\r\n    {\r\n      title: 'IP',\r\n      dataIndex: 'ip',\r\n      key: 'ip',\r\n    },\r\n    {\r\n      title: '操作类方法',\r\n      key: 'method',\r\n      dataIndex: 'method'\r\n    },\r\n    {\r\n      title: '操作时间',\r\n      key: 'time',\r\n      dataIndex: 'time',\r\n      defaultSortOrder: 'descend', // 默认上到下为由大到小的顺序\r\n      sorter: (a, b) => { return a.time> b.time? 1 : -1 },\r\n      sortField: 'time'\r\n    },\r\n    {\r\n      title: '更多操作',\r\n      key: 'action',\r\n      scopedSlots: {customRender: 'action'},\r\n    },\r\n  ];\r\n  \r\n  // const data = [];\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n        formState:{\r\n            account:\"\",\r\n            moudle:\"\"\r\n        },\r\n        loading: false,\r\n        modalLoading: false,\r\n        commodityVisible: false,\r\n        commodityLoading: false,\r\n        data: [],\r\n        columns,\r\n        hasSelected:false,\r\n        json_fields: {\r\n            //生成excel的字段：导出数据的字段\r\n            '账号': 'account',\r\n            '模块名': 'module',\r\n            '操作类型':'busincessType',\r\n            'Ip':'IP',\r\n            '操作方法':'method',\r\n            '时间':'time'\r\n        },\r\n      };\r\n    },\r\n  \r\n    mounted() {\r\n      this.loadTableData()\r\n    },\r\n  \r\n    methods: {\r\n      //获取表格数据\r\n      loadTableData() {\r\n        this.loading = true\r\n        FindAllSystemLog().then(res=>{\r\n          setTimeout(() => {\r\n            this.loading = false\r\n            this.data = res.data\r\n          }, 600)\r\n        })\r\n      },\r\n      submitCommodity() {\r\n        this.modalLoading = true\r\n      },\r\n      //删除日志信息\r\n      handleDelete(r, index) {\r\n        DeleteSystemLogById(r.id).then((res) => {\r\n          if (res.status) this.$message.success('日志信息删除成功');\r\n          this.loadTableData()\r\n        })\r\n      },\r\n      //条件查询处理函数\r\n      handleSubmit(){\r\n        querySystemLog(this.formState.account,this.formState.moudle).then(res=>{\r\n          this.data = res.data\r\n        })\r\n      }\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .editable-add-btn {\r\n    margin-bottom: 15px;\r\n  }\r\n  </style>\r\n  "]}]}