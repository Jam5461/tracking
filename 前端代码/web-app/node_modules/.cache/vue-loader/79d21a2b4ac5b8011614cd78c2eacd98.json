{"remainingRequest":"D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\src\\views\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\src\\views\\Login.vue","mtime":1677201321486},{"path":"D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704694273307},{"path":"D:\\cxs\\Desktop\\stack-white-code\\公众号同步代码\\temp\\在线物流系统\\web-app\\web-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1704694305094}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7QWRtaW5Mb2dpbiwgQWRtaW5TZW5kRW1haWx9IGZyb20gIkAvYXBpL2FkbWluIjsKaW1wb3J0IHtJc0luaXR9IGZyb20gIi4uL2FwaS9hZG1pbiI7CmltcG9ydCBzZXJ2aWNlIGZyb20gIi4uL3V0aWxzL3JlcXVlc3QiCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VuZExvYWRpbmc6IGZhbHNlLAogICAgICBzdWJtaXRUeXBlOiAnMScsIC8vMei0puWPt+eZu+W9lSAy6YKu566x55m75b2VCiAgICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLAogICAgICBmb3JtOiB7CiAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgIGVtYWlsOiAnJywKICAgICAgICBjb2RlOiAnJywKICAgICAgICByZW1lbWJlcjogZmFsc2UsCiAgICAgIH0sCiAgICB9CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIElzSW5pdCgpLnRoZW4oKHJlcykgPT4gewogICAgICBpZiAoIXJlcy5kYXRhKSB0aGlzLiRyb3V0ZXIucHVzaCgnL2luaXQnKQogICAgfSkKICB9LAoKICBtZXRob2RzOiB7CgogICAgc2VuZEVtYWlsKCkgewogICAgICBpZiAodGhpcy5jaGVja0VtYWlsKCkpIHsKICAgICAgICB0aGlzLnNlbmRMb2FkaW5nID0gdHJ1ZQogICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICBBZG1pblNlbmRFbWFpbCh0aGlzLmZvcm0uZW1haWwpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cykgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLm1zZykKICAgICAgICAgIGVsc2UgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cpCiAgICAgICAgICB0aGF0LnNlbmRMb2FkaW5nID0gZmFsc2UKICAgICAgICB9KQoKICAgICAgfQogICAgfSwKCiAgICBzdWJtaXRMb2dpbigpIHsKICAgICAgaWYgKHRoaXMuY2hlY2tFbWFpbCgpKSB7CiAgICAgICAgbGV0IHR5cGUgPSB0aGlzLnN1Ym1pdFR5cGUgPT09ICcxJyA/ICJwYXNzd3JvZCIgOiAiZW1haWwiCiAgICAgICAgQWRtaW5Mb2dpbih0eXBlLCB0aGlzLmZvcm0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsKICAgICAgICAgICAgLy/lrZjlhaXlvoBMb2NhbFN0b3Jl5a2Y5YWlVG9rZW4KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1c2VyL3NhdmVUb2tlbicsIHJlcy5kYXRhLnRva2VuKQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VzZXIvc2F2ZUxvZ2luVXNlcicsIHJlcy5kYXRhLmFkbWluKQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2NvbW1vZGl0eSIpCiAgICAgICAgICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSwgMTAwMCkKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLnmbvlvZXmiJDlip8iKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCgogICAgdGFiQ2xpY2soa2V5KSB7CiAgICAgIHRoaXMuc3VibWl0VHlwZSA9IGtleQogICAgfSwKICAgIGNoZWNrRW1haWwoKSB7CiAgICAgIGNvbnN0IGVtYWlsUmVnZXggPSBuZXcgUmVnRXhwKCdeXFx3ezMsfShcXC5cXHcrKSpAW0EtejAtOV0rKFxcLltBLXpdezIsNX0pezEsMn0kJykKICAgICAgaWYgKCFlbWFpbFJlZ2V4LnRlc3QodGhpcy5mb3JtLmVtYWlsKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+i+k+WFpeato+ehruagvOW8j+eahOmCrueusScpOwogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgIH0sCgogIH0KCn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login-box\">\n    <div>\n\n      <div class=\"title\">物流快递仓库管理系统 - 管理员登录</div>\n      <a-tabs @change=\"tabClick\" default-active-key=\"1\" :tabBarStyle=\"{ textAlign: 'center' }\">\n        <a-tab-pane key=\"1\" tab=\"密码登陆\">\n          <a-input\n              v-model=\"form.email\"\n              size=\"large\"\n              style=\"margin-top: 10px\"\n              class=\"input\"\n              placeholder=\"邮箱\">\n            <a-icon slot=\"prefix\" type=\"mail\"/>\n          </a-input>\n          <a-input-password\n              v-model=\"form.password\"\n              size=\"large\"\n              class=\"input\"\n              placeholder=\"密码\">\n            <a-icon slot=\"prefix\" type=\"lock\"/>\n          </a-input-password>\n        </a-tab-pane>\n        <a-tab-pane key=\"2\" tab=\"验证码登陆\" force-render>\n          <a-input\n              v-model=\"form.email\"\n              size=\"large\"\n              style=\"margin-top: 10px\"\n              class=\"input\"\n              placeholder=\"邮箱\">\n            <a-icon slot=\"prefix\" type=\"mail\"/>\n          </a-input>\n          <div style=\"display: flex\">\n            <a-input\n                v-model=\"form.code\"\n                size=\"large\"\n                class=\"input\"\n                placeholder=\"验证码\">\n              <a-icon slot=\"prefix\" type=\"safety-certificate\"/>\n            </a-input>\n            <a-button class=\"code-btn\" :loading=\"sendLoading\" @click=\"sendEmail\">\n              获取验证码\n            </a-button>\n          </div>\n        </a-tab-pane>\n      </a-tabs>\n      <div style=\"margin-bottom: 20px;display: flex;justify-content: space-around;\">\n        <a-checkbox v-model=\"form.remember\" style=\"display: inline;\">自动登录</a-checkbox>\n        <!-- <a-button type=\"link\" to=\"/init\">没有账号？点我注册 </a-button> -->\n        <router-link to=\"/init\">没有账号？点我注册</router-link>\n      </div>\n      <a-button :loading=\"submitLoading\" class=\"submit-btn\" type=\"primary\" @click=\"submitLogin\">\n        确认登陆\n      </a-button>\n      <div class=\"des\">物流快递仓库管理系统</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {AdminLogin, AdminSendEmail} from \"@/api/admin\";\nimport {IsInit} from \"../api/admin\";\nimport service from \"../utils/request\"\nexport default {\n  data() {\n    return {\n      sendLoading: false,\n      submitType: '1', //1账号登录 2邮箱登录\n      submitLoading: false,\n      form: {\n        password: '',\n        email: '',\n        code: '',\n        remember: false,\n      },\n    }\n  },\n\n  mounted() {\n    IsInit().then((res) => {\n      if (!res.data) this.$router.push('/init')\n    })\n  },\n\n  methods: {\n\n    sendEmail() {\n      if (this.checkEmail()) {\n        this.sendLoading = true\n        var that = this;\n        AdminSendEmail(this.form.email).then((res) => {\n          if (res.data.status) this.$message.success(res.data.msg)\n          else this.$message.error(res.data.msg)\n          that.sendLoading = false\n        })\n\n      }\n    },\n\n    submitLogin() {\n      if (this.checkEmail()) {\n        let type = this.submitType === '1' ? \"passwrod\" : \"email\"\n        AdminLogin(type, this.form).then((res) => {\n          if (res.status) {\n            //存入往LocalStore存入Token\n            this.$store.commit('user/saveToken', res.data.token)\n            this.$store.commit('user/saveLoginUser', res.data.admin)\n            setTimeout(() => {\n              this.$router.push(\"/commodity\")\n              this.submitLoading = false\n            }, 1000)\n            this.$message.success(\"登录成功\")\n          }\n        })\n      }\n    },\n\n    tabClick(key) {\n      this.submitType = key\n    },\n    checkEmail() {\n      const emailRegex = new RegExp('^\\\\w{3,}(\\\\.\\\\w+)*@[A-z0-9]+(\\\\.[A-z]{2,5}){1,2}$')\n      if (!emailRegex.test(this.form.email)) {\n        this.$message.error('请输入正确格式的邮箱');\n        return false\n      } else {\n        return true\n      }\n    },\n\n  }\n\n}\n</script>\n\n<style scoped>\n\nbody {\n  background: #000000 !important;\n}\n\n .ant-tabs-bar {\n  border-bottom: none !important;\n}\n\n .ant-btn-primary {\n  border-color: #5a84fd;\n}\n\n.login-box {\n  width: 350px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.box-header {\n  display: flex;\n}\n\n.box-header-t {\n  font-weight: bolder;\n  font-size: 30px;\n}\n\n.logo {\n  width: 44px;\n  height: 44px;\n  margin-right: 20px;\n  margin-left: 43px;\n}\n\n.ant-tabs-nav {\n  width: 350px;\n}\n\n .ant-tabs-ink-bar {\n  left: 52px;\n}\n\n .ant-input-affix-wrapper .ant-input {\n  font-size: 12px !important;\n}\n\n.title {\n  color: #91949c;\n  padding-top: 15px;\n  padding-bottom: 35px;\n  font-size: 13px;\n  text-align: center;\n}\n\n.input {\n  margin-bottom: 25px;\n  font-size: 10px;\n}\n\n.code-btn {\n  height: 40px;\n  margin-left: 30px;\n}\n\n.submit-btn {\n  letter-spacing: 2px;\n  background: #5a84fd;\n  width: 100%;\n  height: 45px;\n}\n\n.des {\n  padding-top: 25px;\n  font-size: 13px;\n  text-align: center;\n  color: #91949c;\n  letter-spacing: 2px;\n}\n</style>\n"]}]}